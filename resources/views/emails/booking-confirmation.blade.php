<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>X√°c nh·∫≠n ƒë·∫∑t ph√≤ng - {{ $centerName }}</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333333;
            background-color: #f8f9fa;
            margin: 0;
            padding: 20px;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #ffffff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        .header h1 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
        }
        .content {
            padding: 30px;
        }
        .greeting {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 20px;
            color: #1f2937;
        }
        .message {
            margin-bottom: 25px;
            color: #4b5563;
        }
        .booking-box {
            background-color: #f0fdf4;
            border: 2px solid #bbf7d0;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        .booking-item {
            display: flex;
            margin-bottom: 15px;
            align-items: center;
        }
        .booking-label {
            font-weight: 600;
            color: #059669;
            min-width: 160px;
        }
        .booking-value {
            color: #374151;
            background-color: #ffffff;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid #e5e7eb;
            flex: 1;
        }
        .status-pending {
            background-color: #fef3c7;
            border-color: #fcd34d;
            color: #92400e;
            font-weight: bold;
        }
        .status-approved {
            background-color: #dcfce7;
            border-color: #86efac;
            color: #166534;
            font-weight: bold;
        }
        .status-rejected {
            background-color: #fee2e2;
            border-color: #fca5a5;
            color: #dc2626;
            font-weight: bold;
        }
        .status-cancelled {
            background-color: #fee2e2;
            border-color: #fca5a5;
            color: #dc2626;
            font-weight: bold;
        }
        .booking-code-highlight {
            background-color: #f0f9ff;
            border-color: #0ea5e9;
            color: #0c4a6e;
            font-weight: bold;
            font-size: 16px;
        }
        .details-box {
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
        }
        .details-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        .details-table th,
        .details-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #e5e7eb;
        }
        .details-table th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #374151;
        }
        .warning {
            background-color: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .warning-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 5px;
        }
        .warning-text {
            color: #b45309;
            font-size: 14px;
        }
        .success {
            background-color: #dcfce7;
            border-left: 4px solid #22c55e;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .success-title {
            font-weight: 600;
            color: #166534;
            margin-bottom: 5px;
        }
        .success-text {
            color: #15803d;
            font-size: 14px;
        }
        .error {
            background-color: #fee2e2;
            border-left: 4px solid #ef4444;
            padding: 15px;
            margin: 20px 0;
            border-radius: 4px;
        }
        .error-title {
            font-weight: 600;
            color: #dc2626;
            margin-bottom: 5px;
        }
        .error-text {
            color: #dc2626;
            font-size: 14px;
        }
        .contact-box {
            background-color: #f0f9ff;
            border: 1px solid #bae6fd;
            border-radius: 8px;
            padding: 20px;
            margin: 25px 0;
            text-align: center;
        }
        .contact-title {
            font-weight: 600;
            color: #0c4a6e;
            margin-bottom: 10px;
        }
        .contact-info {
            color: #0369a1;
            font-size: 14px;
            margin: 5px 0;
        }
        .footer {
            background-color: #f9fafb;
            padding: 20px 30px;
            text-align: center;
            border-top: 1px solid #e5e7eb;
            color: #6b7280;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üè¢ X√°c nh·∫≠n ƒë·∫∑t ph√≤ng</h1>
        </div>
        
        <div class="content">
            <div class="greeting">
                K√≠nh ch√†o {{ $customerName }},
            </div>
            
            <div class="message">
                @if($status === 'pending')
                C·∫£m ∆°n b·∫°n ƒë√£ ƒë·∫∑t ph√≤ng t·∫°i <strong>{{ $centerName }}</strong>. Y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ti·∫øp nh·∫≠n v√† ƒëang ch·ªù ph√™ duy·ªát t·ª´ b·ªô ph·∫≠n qu·∫£n l√Ω.
                @elseif($status === 'approved')
                Ch√∫c m·ª´ng! Y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n t·∫°i <strong>{{ $centerName }}</strong> ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát th√†nh c√¥ng.
                @elseif($status === 'rejected')
                R·∫•t ti·∫øc, y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n t·∫°i <strong>{{ $centerName }}</strong> ƒë√£ b·ªã t·ª´ ch·ªëi.
                @elseif($status === 'cancelled_by_admin')
                Y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n t·∫°i <strong>{{ $centerName }}</strong> ƒë√£ b·ªã h·ªßy b·ªüi qu·∫£n tr·ªã vi√™n.
                @elseif($status === 'cancelled_by_customer')
                Y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n t·∫°i <strong>{{ $centerName }}</strong> ƒë√£ ƒë∆∞·ª£c h·ªßy theo y√™u c·∫ßu c·ªßa b·∫°n.
                @endif
            </div>
            
            <div class="booking-box">
                <h3 style="margin-top: 0; color: #059669;">üìã Th√¥ng tin ƒë·∫∑t ph√≤ng:</h3>
                
                <div class="booking-item">
                    <span class="booking-label">üè∑Ô∏è M√£ ƒë·∫∑t ph√≤ng:</span>
                    <span class="booking-value booking-code-highlight">{{ $bookingCode }}</span>
                </div>
                
                <div class="booking-item">
                    <span class="booking-label">üè¢ T√™n ph√≤ng:</span>
                    <span class="booking-value">{{ $roomName }}</span>
                </div>
                
                @if($roomLocation)
                <div class="booking-item">
                    <span class="booking-label">üìç V·ªã tr√≠:</span>
                    <span class="booking-value">{{ $roomLocation }}</span>
                </div>
                @endif
                
                <div class="booking-item">
                    <span class="booking-label">üìÖ Ng√†y b·∫Øt ƒë·∫ßu:</span>
                    <span class="booking-value">{{ $startDate }}</span>
                </div>
                
                @if($endDate)
                <div class="booking-item">
                    <span class="booking-label">üìÖ Ng√†y k·∫øt th√∫c:</span>
                    <span class="booking-value">{{ $endDate }}</span>
                </div>
                @endif
                
                <div class="booking-item">
                    <span class="booking-label">üìä Tr·∫°ng th√°i:</span>
                    <span class="booking-value 
                        @if($status === 'pending') status-pending
                        @elseif($status === 'approved') status-approved
                        @elseif($status === 'rejected') status-rejected
                        @elseif(in_array($status, ['cancelled_by_admin', 'cancelled_by_customer'])) status-cancelled
                        @endif">
                        @if($status === 'pending')
                            ‚è≥ ƒêang ch·ªù duy·ªát
                        @elseif($status === 'approved')
                            ‚úÖ ƒê√£ ph√™ duy·ªát
                        @elseif($status === 'rejected')
                            ‚ùå ƒê√£ t·ª´ ch·ªëi
                        @elseif($status === 'cancelled_by_admin')
                            üö´ ƒê√£ h·ªßy b·ªüi qu·∫£n tr·ªã vi√™n
                        @elseif($status === 'cancelled_by_customer')
                            üö´ ƒê√£ h·ªßy b·ªüi kh√°ch h√†ng
                        @else
                            {{ ucfirst($status) }}
                        @endif
                    </span>
                </div>
                
                <div class="booking-item">
                    <span class="booking-label">üìÖ Ng√†y ƒë·∫∑t:</span>
                    <span class="booking-value">{{ $createdAt }}</span>
                </div>
            </div>
            
            @if(count($bookingDetails) > 0)
            <div class="details-box">
                <h3 style="margin-top: 0; color: #4b5563;">üìÖ Chi ti·∫øt l·ªãch ƒë·∫∑t ph√≤ng:</h3>
                <table class="details-table">
                    <thead>
                        <tr>
                            <th>üìÖ Ng√†y</th>
                            <th>‚è∞ Th·ªùi gian</th>
                            <th>üìä Tr·∫°ng th√°i</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach($bookingDetails as $detail)
                        <tr>
                            <td>{{ \Carbon\Carbon::parse($detail->booking_date)->format('d/m/Y') }}</td>
                            <td>
                                {{ \Carbon\Carbon::parse($detail->start_time)->format('H:i') }} - 
                                {{ \Carbon\Carbon::parse($detail->end_time)->format('H:i') }}
                            </td>
                            <td>
                                @if($detail->status === 'pending')
                                    ‚è≥ ƒêang ch·ªù duy·ªát
                                @elseif($detail->status === 'approved')
                                    ‚úÖ ƒê√£ ph√™ duy·ªát
                                @elseif($detail->status === 'rejected')
                                    ‚ùå ƒê√£ t·ª´ ch·ªëi
                                @elseif($detail->status === 'cancelled')
                                    üö´ ƒê√£ h·ªßy
                                @else
                                    {{ ucfirst($detail->status) }}
                                @endif
                            </td>
                        </tr>
                        @endforeach
                    </tbody>
                </table>
            </div>
            @endif
            
            @if($status === 'pending')
            <div class="warning">
                <div class="warning-title">‚ö†Ô∏è L∆∞u √Ω quan tr·ªçng:</div>
                <div class="warning-text">
                    ‚Ä¢ Y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n ƒëang ch·ªù ph√™ duy·ªát t·ª´ b·ªô ph·∫≠n qu·∫£n l√Ω<br>
                    ‚Ä¢ B·∫°n s·∫Ω nh·∫≠n ƒë∆∞·ª£c email th√¥ng b√°o khi y√™u c·∫ßu ƒë∆∞·ª£c duy·ªát ho·∫∑c t·ª´ ch·ªëi<br>
                    ‚Ä¢ Th·ªùi gian x·ª≠ l√Ω y√™u c·∫ßu c√≥ th·ªÉ t·ª´ 1h ƒë·∫øn 24h t√πy v√†o t√¨nh tr·∫°ng ph√≤ng v√† s·ªë l∆∞·ª£ng y√™u c·∫ßu<br>
                    ‚Ä¢ N·∫øu kh√¥ng nh·∫≠n ƒë∆∞·ª£c ph·∫£n h·ªìi trong v√≤ng 24h, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ <br>
                    ‚Ä¢ Vui l√≤ng gi·ªØ m√£ ƒë·∫∑t ph√≤ng ƒë·ªÉ tra c·ª©u v√† li√™n h·ªá khi c·∫ßn
                </div>
            </div>
            @elseif($status === 'approved')
            <div class="success">
                <div class="success-title">üéâ Ch√∫c m·ª´ng!</div>
                <div class="success-text">
                    ‚Ä¢ Y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c ph√™ duy·ªát th√†nh c√¥ng<br>
                    ‚Ä¢ B·∫°n c√≥ th·ªÉ s·ª≠ d·ª•ng ph√≤ng trong th·ªùi gian ƒë√£ ƒëƒÉng k√Ω<br>
                    ‚Ä¢ Vui l√≤ng c√≥ m·∫∑t ƒë√∫ng gi·ªù v√† tu√¢n th·ªß c√°c quy ƒë·ªãnh s·ª≠ d·ª•ng ph√≤ng<br>
                    ‚Ä¢ Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu c√≥ thay ƒë·ªïi v·ªÅ l·ªãch s·ª≠ d·ª•ng
                </div>
            </div>
            @elseif($status === 'rejected')
            <div class="error">
                <div class="error-title">‚ùå Y√™u c·∫ßu b·ªã t·ª´ ch·ªëi</div>
                <div class="error-text">
                    ‚Ä¢ R·∫•t ti·∫øc, y√™u c·∫ßu ƒë·∫∑t ph√≤ng c·ªßa b·∫°n ƒë√£ b·ªã t·ª´ ch·ªëi<br>
                    ‚Ä¢ C√≥ th·ªÉ do ph√≤ng ƒë√£ ƒë∆∞·ª£c ƒë·∫∑t trong th·ªùi gian n√†y ho·∫∑c kh√¥ng ƒë√°p ·ª©ng y√™u c·∫ßu<br>
                    ‚Ä¢ B·∫°n c√≥ th·ªÉ th·ª≠ ƒë·∫∑t ph√≤ng kh√°c ho·∫∑c th·ªùi gian kh√°c<br>
                    ‚Ä¢ Li√™n h·ªá v·ªõi ch√∫ng t√¥i ƒë·ªÉ ƒë∆∞·ª£c h·ªó tr·ª£ t√¨m ph√≤ng ph√π h·ª£p
                </div>
            </div>
            @elseif(in_array($status, ['cancelled_by_admin', 'cancelled_by_customer']))
            <div class="error">
                <div class="error-title">üö´ ƒê·∫∑t ph√≤ng ƒë√£ b·ªã h·ªßy</div>
                <div class="error-text">
                    @if($status === 'cancelled_by_admin')
                    ‚Ä¢ ƒê·∫∑t ph√≤ng ƒë√£ b·ªã h·ªßy b·ªüi qu·∫£n tr·ªã vi√™n<br>
                    ‚Ä¢ C√≥ th·ªÉ do ph√≤ng b·∫£o tr√¨ ho·∫∑c c√≥ s·ª± ki·ªán ∆∞u ti√™n cao h∆°n<br>
                    @else
                    ‚Ä¢ ƒê·∫∑t ph√≤ng ƒë√£ ƒë∆∞·ª£c h·ªßy theo y√™u c·∫ßu c·ªßa b·∫°n<br>
                    @endif
                    ‚Ä¢ B·∫°n c√≥ th·ªÉ ƒë·∫∑t ph√≤ng m·ªõi n·∫øu c·∫ßn<br>
                    ‚Ä¢ Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu c·∫ßn h·ªó tr·ª£ th√™m
                </div>
            </div>
            @endif
            
            <div class="details-box">
                <h3 style="margin-top: 0; color: #4b5563;">üí° Nh·ªØng b∆∞·ªõc ti·∫øp theo:</h3>
                <ul style="color: #6b7280; margin: 10px 0; padding-left: 20px;">
                    @if($status === 'pending')
                    <li>Ch·ªù email x√°c nh·∫≠n t·ª´ b·ªô ph·∫≠n qu·∫£n l√Ω</li>
                    <li>Chu·∫©n b·ªã t√†i li·ªáu v√† thi·∫øt b·ªã c·∫ßn thi·∫øt</li>
                    <li>Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu c√≥ th·∫Øc m·∫Øc</li>
                    @elseif($status === 'approved')
                    <li>C√≥ m·∫∑t ƒë√∫ng gi·ªù t·∫°i ph√≤ng ƒë√£ ƒë·∫∑t</li>
                    <li>Tu√¢n th·ªß quy ƒë·ªãnh s·ª≠ d·ª•ng ph√≤ng</li>
                    <li>Th√¥ng b√°o ngay n·∫øu c√≥ thay ƒë·ªïi k·∫ø ho·∫°ch</li>
                    @elseif($status === 'rejected')
                    <li>Xem x√©t ƒë·∫∑t ph√≤ng kh√°c ho·∫∑c th·ªùi gian kh√°c</li>
                    <li>Li√™n h·ªá ƒë·ªÉ ƒë∆∞·ª£c t∆∞ v·∫•n v·ªÅ ph√≤ng ph√π h·ª£p</li>
                    @else
                    <li>Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu c·∫ßn h·ªó tr·ª£</li>
                    <li>C√≥ th·ªÉ ƒë·∫∑t ph√≤ng m·ªõi n·∫øu c·∫ßn thi·∫øt</li>
                    @endif
                </ul>
            </div>
            
            <div class="contact-box">
                <div class="contact-title">üìû Th√¥ng tin li√™n h·ªá</div>
                <div class="contact-info">üìß Email: support@example.com</div>
                <div class="contact-info">‚òéÔ∏è ƒêi·ªán tho·∫°i: (028) 1234 5678</div>
                <div class="contact-info">üìç ƒê·ªãa ch·ªâ: 123 ƒê∆∞·ªùng ABC, Qu·∫≠n XYZ, TP.HCM</div>
                <div class="contact-info" style="margin-top: 10px; font-style: italic;">
                    Li√™n h·ªá v·ªõi ch√∫ng t√¥i n·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi n√†o v·ªÅ vi·ªác ƒë·∫∑t ph√≤ng
                </div>
            </div>
            
            <div class="message">
                C·∫£m ∆°n b·∫°n ƒë√£ tin t∆∞·ªüng v√† s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa <strong>{{ $centerName }}</strong>. Ch√∫ng t√¥i cam k·∫øt mang ƒë·∫øn cho b·∫°n d·ªãch v·ª• t·ªët nh·∫•t!
            </div>
        </div>
        
        <div class="footer">
            <p>
                Email n√†y l√† th√¥ng b√°o t·ª± ƒë·ªông v·ªÅ vi·ªác ƒë·∫∑t ph√≤ng c·ªßa b·∫°n.<br>
                Vui l√≤ng kh√¥ng tr·∫£ l·ªùi email n√†y.
            </p>
            <p>
                ¬© {{ date('Y') }} {{ $centerName }}. All rights reserved.
            </p>
        </div>
    </div>
</body>
</html>